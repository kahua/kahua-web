# Makefile for kahua-web
# $Id: Makefile.in,v 1.5 2004/02/20 10:59:27 tahara Exp $

SHELL       = @SHELL@
prefix      = @prefix@
exec_prefix = @exec_prefix@
bindir      = @bindir@
libdir      = @libdir@
srcdir      = @srcdir@
VPATH       = $(srcdir)
top_builddir = @top_builddir@
top_srcdir   = @top_srcdir@

DESTDIR  =

GOSH = @GOSH@
KAHUA_INSTALL = @KAHUA_INSTALL@

# specify -c ../kahua.conf etc. to give an alternative conf file
KAHUACONFIG = 

SCRIPTFILES = kahua-web/kahua-web.kahua \
              kahua-web/macro.kahua \
	      kahua-web/login.kahua \
              kahua-web/mailform.kahua

STATICFILES = kahua-web/kahua-web.css

SOURCEDIR   = kahua-web
PLUGINFILE  = wiliki.scm

CONFIG_GENERATED = Makefile VERSION test/test.scm \
		   config.log config.status autom4* \
.PHONY: all check clean distclean install maintainer-clean

all:

check:
	rm -f test/test.log
	cd test; $(GOSH) ./test.scm > test.log

clean:
	rm -rf core *~ kahua-web/*~ test/*~ test/_* test/test.log

install: 
	$(KAHUA_INSTALL) $(KAHUACONFIG) -t script $(SCRIPTFILES)
	$(KAHUA_INSTALL) $(KAHUACONFIG) -t static $(STATICFILES)
	$(KAHUA_INSTALL) $(KAHUACONFIG) -t plugin -r $(PLUGINFILE) \
                                        $(SOURCEDIR)/$(PLUGINFILE)
	$(GOSH) ./init.scm

uninstall :
	$(KAHUA_INSTALL) -U $(KAHUACONFIG) -t script $(SCRIPTFILES)
	$(KAHUA_INSTALL) -U $(KAHUACONFIG) -t static $(STATICFILES)
	$(KAHUA_INSTALL) -U $(KAHUACONFIG) -t plugin -r $(PLUGINFILE) \
                                        $(SOURCEDIR)/$(PLUGINFILE)


distclean: clean
	rm -rf $(CONFIG_GENERATED)

maintainer-clean: clean
	rm -rf $(CONFIG_GENERATED) configure



